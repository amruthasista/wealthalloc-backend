# ==================== WealthAlloc Backend Environment Configuration ====================
# Copy this file to .env and fill in your actual values
# NEVER commit .env file to version control!

# ==================== Application Settings ====================
APP_NAME=Wealthalloc
APP_VERSION=1.0.0
ENVIRONMENT=development
# Options: development, staging, production
DEBUG=True
# Set to False in production

# ==================== API Settings ====================
API_V1_STR=/api/v1
SECRET_KEY=your-secret-key-here-change-in-production-use-openssl-rand-hex-32
# Generate with: openssl rand -hex 32
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# ==================== Server Settings ====================
HOST=0.0.0.0
PORT=8000
WORKERS=4
# Adjust workers based on CPU cores: (2 x CPU cores) + 1
RELOAD=False
# Set to True only in development

# ==================== Database Configuration ====================
# PostgreSQL / CockroachDB
DATABASE_URL=postgresql+asyncpg://wealthalloc_user:your_password@localhost:5432/wealthalloc
# Format: postgresql+asyncpg://user:password@host:port/database
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_ECHO=False
# Set to True for SQL query logging in development
DB_POOL_RECYCLE=3600
# Recycle connections after 1 hour
DB_POOL_PRE_PING=True
# Test connections before using them

# ==================== Redis Configuration ====================
REDIS_URL=redis://localhost:6379/0
# For Redis with password: redis://:password@localhost:6379/0
REDIS_PASSWORD=
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_KEEPALIVE=True
REDIS_SOCKET_TIMEOUT=5
REDIS_DB=0
# Cache TTL (in seconds)
CACHE_TTL_DEFAULT=300
CACHE_TTL_MARKET_DATA=60
CACHE_TTL_PORTFOLIO=180

# ==================== Kafka Configuration ====================
KAFKA_BOOTSTRAP_SERVERS=localhost:9092
# Multiple servers: server1:9092,server2:9092,server3:9092
KAFKA_TOPIC_PREFIX=wealthalloc
KAFKA_CONSUMER_GROUP=wealthalloc-api
KAFKA_AUTO_OFFSET_RESET=latest
# Options: earliest, latest

# ==================== IBKR (Interactive Brokers) Configuration ====================
# Gateway/TWS Connection
IBKR_HOST=127.0.0.1
IBKR_PORT=7497
# 7497 for paper trading, 7496 for live trading
IBKR_CLIENT_ID=1
# Unique client ID (1-32)
IBKR_ACCOUNT_ID=DU1234567
# Your IBKR account ID
IBKR_PAPER_TRADING=True
# Set to False for live trading
IBKR_CONNECT_TIMEOUT=10
IBKR_REQUEST_TIMEOUT=30
IBKR_RECONNECT_ATTEMPTS=3
IBKR_RECONNECT_DELAY=5

# IBKR Credentials (if using programmatic login)
IBKR_USERNAME=
IBKR_PASSWORD=

# ==================== AI/ML Model Settings ====================
# LSTM Autoencoder
LSTM_MODEL_PATH=./models/lstm_autoencoder.pth
MODEL_BATCH_SIZE=32
ANOMALY_THRESHOLD=0.85
# Threshold for anomaly detection (0.0-1.0)
MODEL_SEQUENCE_LENGTH=60
MODEL_ENCODING_DIM=32
MODEL_DEVICE=cpu
# Options: cpu, cuda, mps (for Apple Silicon)

# Model Training
TRAINING_EPOCHS=100
TRAINING_LEARNING_RATE=0.001
TRAINING_VALIDATION_SPLIT=0.2

# ==================== Tax Loss Harvesting Settings ====================
TLH_ENABLED=True
TLH_MIN_LOSS_THRESHOLD=500.00
# Minimum loss amount (in dollars) to identify as opportunity
TLH_WASH_SALE_DAYS=30
# Wash sale rule period (IRS regulation)
TLH_MAX_CORRELATION=0.95
# Maximum correlation for replacement securities
TLH_TAX_RATE=0.25
# Assumed tax rate for savings calculation
TLH_AUTO_EXECUTE=False
# Set to True to automatically execute identified opportunities

# ==================== Logging Configuration ====================
LOG_LEVEL=INFO
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=json
# Options: json, text
LOG_FILE=logs/wealthalloc.log
LOG_MAX_BYTES=10485760
# 10MB
LOG_BACKUP_COUNT=5
LOG_TO_CONSOLE=True
LOG_TO_FILE=True

# Structured Logging
STRUCTLOG_ENABLED=True
STRUCTLOG_PROCESSORS=timestamp,stack_info,format_exc_info

# ==================== Monitoring & Metrics ====================
# Prometheus
PROMETHEUS_PORT=9090
PROMETHEUS_ENABLED=True
PROMETHEUS_METRICS_PATH=/metrics

# Health Checks
HEALTH_CHECK_ENABLED=True
HEALTH_CHECK_PATH=/health

# Performance Monitoring
APM_ENABLED=False
APM_SERVICE_NAME=wealthalloc-api
APM_SERVER_URL=http://localhost:8200

# ==================== CORS Configuration ====================
ALLOWED_ORIGINS=http://localhost:3000,https://wealth-alloc-389f2443.base44.app,https://app.wealthalloc.com
# Comma-separated list of allowed origins
ALLOWED_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS
ALLOWED_HEADERS=*
ALLOW_CREDENTIALS=True

# ==================== Rate Limiting ====================
RATE_LIMIT_ENABLED=True
RATE_LIMIT_PER_MINUTE=60
# Requests per minute per user
RATE_LIMIT_BURST=10
# Burst allowance
RATE_LIMIT_STRATEGY=fixed-window
# Options: fixed-window, sliding-window, token-bucket

# ==================== Security Settings ====================
# JWT Configuration
JWT_ALGORITHM=HS256
# Options: HS256, RS256
JWT_SECRET_KEY=your-jwt-secret-key-here
JWT_ISSUER=wealthalloc-api
JWT_AUDIENCE=wealthalloc-app

# Password Hashing
PASSWORD_HASH_ALGORITHM=bcrypt
PASSWORD_HASH_ROUNDS=12

# API Key Authentication
API_KEY_HEADER=X-API-Key
API_KEY_ENABLED=False

# ==================== Email Notifications (Optional) ====================
SMTP_ENABLED=False
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=notifications@wealthalloc.com
SMTP_FROM_NAME=WealthAlloc
SMTP_USE_TLS=True

# Notification Settings
NOTIFICATION_EMAIL=admin@wealthalloc.com
SEND_TRADE_CONFIRMATIONS=True
SEND_RECOMMENDATION_ALERTS=True
SEND_TAX_HARVEST_ALERTS=True

# ==================== AWS Configuration (Optional) ====================
AWS_ENABLED=False
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
AWS_DEFAULT_REGION=us-east-1

# S3 Storage
S3_BUCKET=wealthalloc-data
S3_BUCKET_BACKUPS=wealthalloc-backups
S3_BUCKET_MODELS=wealthalloc-models

# SQS Queue
SQS_QUEUE_URL=

# SNS Topics
SNS_TOPIC_ARN=

# ==================== Google Cloud Platform (Optional) ====================
GCP_ENABLED=False
GCP_PROJECT_ID=
GCP_CREDENTIALS_PATH=
GCP_BUCKET=wealthalloc-data
GCP_REGION=us-central1

# ==================== Azure Configuration (Optional) ====================
AZURE_ENABLED=False
AZURE_STORAGE_CONNECTION_STRING=
AZURE_STORAGE_ACCOUNT_NAME=
AZURE_STORAGE_ACCOUNT_KEY=
AZURE_CONTAINER_NAME=wealthalloc

# ==================== External APIs ====================
# Market Data APIs
ALPHA_VANTAGE_API_KEY=
FINNHUB_API_KEY=
POLYGON_API_KEY=
IEX_CLOUD_API_KEY=

# News & Sentiment APIs
NEWS_API_KEY=
TWITTER_API_KEY=
REDDIT_CLIENT_ID=
REDDIT_CLIENT_SECRET=

# ==================== Feature Flags ====================
FEATURE_AI_RECOMMENDATIONS=True
FEATURE_TAX_HARVESTING=True
FEATURE_AUTO_REBALANCING=False
FEATURE_SOCIAL_TRADING=False
FEATURE_CRYPTO_TRADING=False
FEATURE_OPTIONS_TRADING=False
FEATURE_EDUCATIONAL_CONTENT=True

# ==================== Batch Jobs & Scheduled Tasks ====================
# Cron schedules (in cron format)
SCHEDULE_TAX_HARVEST_SCAN=0 9 * * *
# Daily at 9 AM
SCHEDULE_AI_RECOMMENDATIONS=0 8 * * *
# Daily at 8 AM
SCHEDULE_PORTFOLIO_SYNC=*/15 * * * *
# Every 15 minutes
SCHEDULE_MODEL_TRAINING=0 2 * * 0
# Weekly on Sunday at 2 AM

# ==================== Testing Configuration ====================
TEST_MODE=False
TEST_DATABASE_URL=postgresql+asyncpg://test_user:test_pass@localhost:5432/wealthalloc_test
TEST_IBKR_MOCK=True
# Use mock IBKR client in tests
TEST_SKIP_INTEGRATION=False
# Skip integration tests

# ==================== Development Tools ====================
# Hot Reload
DEV_RELOAD=True
DEV_PORT=8000

# Debug Toolbar
DEBUG_TOOLBAR_ENABLED=False

# Profiling
PROFILING_ENABLED=False
PROFILER_OUTPUT_DIR=profiling/

# ==================== Backup & Disaster Recovery ====================
BACKUP_ENABLED=True
BACKUP_SCHEDULE=0 2 * * *
# Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_DESTINATION=s3://wealthalloc-backups/

# ==================== Compliance & Audit ====================
AUDIT_LOG_ENABLED=True
AUDIT_LOG_LEVEL=INFO
AUDIT_LOG_FILE=logs/audit.log
COMPLIANCE_MODE=False
# Set to True for strict regulatory compliance
PII_ENCRYPTION_ENABLED=True

# ==================== Custom Application Settings ====================
# Portfolio Settings
DEFAULT_PORTFOLIO_NAME=My Portfolio
DEFAULT_RISK_TOLERANCE=moderate
# Options: conservative, moderate, aggressive
DEFAULT_CURRENCY=USD

# Trading Settings
ALLOW_MARKET_ORDERS=True
ALLOW_LIMIT_ORDERS=True
ALLOW_STOP_ORDERS=True
MAX_ORDER_SIZE=10000
# Maximum number of shares per order

# Commission Settings
DEFAULT_COMMISSION=0.00
# Commission per trade

# ==================== Third-Party Integrations ====================
# Plaid (for bank account linking)
PLAID_CLIENT_ID=
PLAID_SECRET=
PLAID_ENVIRONMENT=sandbox
# Options: sandbox, development, production

# Stripe (for payments)
STRIPE_API_KEY=
STRIPE_WEBHOOK_SECRET=

# SendGrid (for emails)
SENDGRID_API_KEY=

# Twilio (for SMS)
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=

# ==================== Notes ====================
# 1. Never commit the actual .env file to version control
# 2. Use strong, unique passwords and API keys
# 3. Rotate secrets regularly
# 4. Use different values for each environment (dev, staging, prod)
# 5. Consider using a secrets manager (AWS Secrets Manager, HashiCorp Vault, etc.)
# 6. Review and update this file when adding new configuration options

# ==================== End of Configuration ====================
